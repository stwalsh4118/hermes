# [10-1] HLS.js Integration & Dependencies

[Back to task list](./tasks.md)

## Description

Install and configure the HLS.js library along with TypeScript type definitions to enable HTTP Live Streaming (HLS) video playback in the browser. HLS.js is a JavaScript library that implements an HLS client that can play HLS streams in browsers that support Media Source Extensions (all modern browsers except Safari, which has native HLS support).

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-31 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

### Functional Requirements
- Install hls.js npm package (latest stable version)
- Install @types/hls.js for TypeScript support
- Verify packages are properly added to package.json
- Ensure TypeScript can resolve types correctly

### Technical Requirements
- Use pnpm as package manager (existing project standard)
- Install in web/ directory workspace
- Version constraints: use compatible versions for Next.js 15 and React 19
- No breaking changes to existing dependencies

## Implementation Plan

### Step 1: Install hls.js package
```bash
cd web
pnpm add hls.js
```

### Step 2: Install TypeScript types
```bash
cd web
pnpm add -D @types/hls.js
```

### Step 3: Verify installation
- Check that packages appear in package.json
- Verify pnpm-lock.yaml is updated
- Test TypeScript import: `import Hls from 'hls.js'`

### Step 4: Create basic type test file
- Create a simple test component that imports Hls
- Verify no TypeScript errors
- Remove test file after verification

## Test Plan

### Objective
Verify hls.js and its TypeScript types are correctly installed and can be imported without errors.

### Test Scope
- Package installation success
- TypeScript type resolution
- No dependency conflicts

### Success Criteria
- `pnpm install` completes without errors
- hls.js appears in package.json dependencies
- @types/hls.js appears in package.json devDependencies
- TypeScript can import and type-check Hls

## Verification

### Acceptance Criteria
- [ ] hls.js package installed successfully
- [ ] @types/hls.js package installed successfully
- [ ] package.json updated with both packages
- [ ] pnpm-lock.yaml updated
- [ ] No dependency conflicts reported
- [ ] TypeScript can import Hls type without errors
- [ ] No console errors or warnings

### Definition of Done
- All acceptance criteria met
- Dependencies installed and committed
- Ready for video player component implementation

## Files Modified

### Modified Files
- `web/package.json` - Add hls.js and @types/hls.js dependencies
- `web/pnpm-lock.yaml` - Lock file updated with new dependencies

### API Specifications Updated
- None (dependency installation only)

## Notes

- HLS.js is required for non-Safari browsers (Chrome, Firefox, Edge)
- Safari has native HLS support and doesn't need HLS.js
- The library is lightweight (~240KB minified)
- Supports adaptive bitrate streaming out of the box
- Version compatibility: hls.js ^1.5.0 recommended for React 19


