# [10-2] Channel Player Page Route

[Back to task list](./tasks.md)

## Description

Create the main channel player page at `/channels/[id]` route (distinct from the existing `/channels/[id]/edit` route). This page will serve as the container for the video player and related components, handling route parameters, channel data fetching, error states, and providing proper metadata for SEO.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-31 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

### Functional Requirements
- Create player page at `/channels/[id]/page.tsx` (NOT in edit subdirectory)
- Extract `channelId` from route params
- Fetch channel data using existing `useChannel` hook
- Display channel name in page header
- Handle loading states gracefully
- Handle error states (404 for invalid/missing channels)
- Provide proper page metadata (title, description)

### Technical Requirements
- Follow existing page patterns from channels list and edit pages
- Use Next.js 15 App Router conventions
- Use existing TanStack Query hooks (`useChannel`)
- Implement error boundaries for graceful failures
- Use retro UI styling consistent with app theme
- Responsive layout (mobile, tablet, desktop)

## Implementation Plan

### Step 1: Create page file structure
```
web/app/channels/[id]/page.tsx
```
Note: This is DIFFERENT from `web/app/channels/[id]/edit/page.tsx`

### Step 2: Implement basic page structure
- Extract `channelId` from `params.id`
- Set up metadata export following existing patterns
- Create page component with proper TypeScript types

### Step 3: Integrate channel data fetching
- Use `useChannel(channelId)` hook
- Handle loading state with skeleton/spinner
- Handle error state with error message
- Display channel name when loaded

### Step 4: Create page layout
- Full-width container (different from edit page which has sidebar)
- Dark background for video player area
- Minimal padding to maximize player space
- Retro header with channel name and back button

### Step 5: Add metadata
- Dynamic title: `"[Channel Name] | Hermes"`
- Description: `"Watch [Channel Name] live"`
- Use `createMetadata` utility from existing codebase

## Test Plan

### Objective
Verify the channel player page route works correctly and handles all states appropriately.

### Test Scope
- Page routing and parameter extraction
- Channel data fetching
- Loading states
- Error states (404, network errors)
- Metadata generation
- Responsive behavior

### Success Criteria
- Navigating to `/channels/:id` loads the page
- Invalid channel IDs show 404 error
- Loading state displays while fetching
- Channel name displays in header
- Metadata is correctly set
- Back button navigates to channel list
- Page is responsive on mobile/tablet/desktop

## Verification

### Acceptance Criteria
- [ ] Page created at correct route (`/channels/[id]/page.tsx`)
- [ ] Route params extracted correctly
- [ ] Channel data fetched using `useChannel` hook
- [ ] Loading state implemented
- [ ] Error state implemented (404 for invalid channels)
- [ ] Channel name displayed in header
- [ ] Metadata export implemented
- [ ] Back button navigates to `/channels`
- [ ] Responsive layout works on all screen sizes
- [ ] Retro styling consistent with app theme
- [ ] No console errors or warnings

### Definition of Done
- All acceptance criteria met
- Page accessible via browser navigation
- Error handling tested with invalid IDs
- Ready for video player component integration

## Files Modified

### New Files Created
- `web/app/channels/[id]/page.tsx` - Main player page component

### API Specifications Updated
- `docs/api-specs/frontend/frontend-api.md` - Document player page route and patterns

## Notes

- This route is distinct from `/channels/[id]/edit` which is for editing
- The `[id]` folder already exists (contains `edit/` subdirectory), we're adding `page.tsx` to it
- Full-width layout to maximize video player space
- Minimal chrome to focus on video content
- Consider adding Picture-in-Picture button for future enhancement
- Channel data includes: id, name, icon, start_time, loop


