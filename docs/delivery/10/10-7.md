# [10-7] Schedule Sidebar Component (Mock Data)

[Back to task list](./tasks.md)

## Description

Display program schedule with mock 24-hour data. This component shows a scrollable list of upcoming programs with time, thumbnail, and title. It's a sidebar on desktop and collapsible bottom sheet on mobile. The data structure matches the EPG API shape for easy integration later.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-31 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

### Functional Requirements
- Display scrollable list of programs (next 24 hours)
- Each entry: time, thumbnail, title
- Highlight currently playing program
- Generate ~10-12 mock programs
- Responsive: sidebar on desktop, bottom sheet/collapsible on mobile
- Auto-scroll to current program
- Use mock data matching EPG API structure

### Technical Requirements
- Create `web/components/video/schedule-sidebar.tsx`
- Mock data array of EPG Programs
- Add clear TODO comment for EPG integration
- Use shadcn/ui Sheet component for mobile
- Smooth scrolling behavior
- Retro styling

## Implementation Plan

### Step 1: Generate mock schedule data
```typescript
// TODO: Replace with EPG API when PBI-5 is complete
const generateMockSchedule = (): EPGProgram[] => {
  const programs: EPGProgram[] = [];
  let startTime = Date.now();
  
  for (let i = 0; i < 12; i++) {
    const duration = 25 * 60 * 1000; // 25 minutes
    programs.push({
      channel_id: "...",
      media_id: `mock-${i}`,
      title: `Program ${i + 1} - Episode Title`,
      description: "Mock description...",
      start_time: new Date(startTime).toISOString(),
      end_time: new Date(startTime + duration).toISOString(),
      season: Math.floor(i / 4) + 1,
      episode: (i % 4) + 1,
      icon: `/placeholder-${i}.jpg`
    });
    startTime += duration;
  }
  
  return programs;
};
```

### Step 2: Create component structure
```
web/components/video/schedule-sidebar.tsx
```

### Step 3: Implement desktop sidebar
- Fixed width sidebar (300-400px)
- Scrollable list
- Highlight current program
- Sticky header with "Schedule" title

### Step 4: Implement mobile bottom sheet
```typescript
const isMobile = useMobile(); // Existing hook

return isMobile ? (
  <Sheet>
    <SheetTrigger>View Schedule</SheetTrigger>
    <SheetContent side="bottom">
      <ScheduleList programs={mockSchedule} />
    </SheetContent>
  </Sheet>
) : (
  <aside className="schedule-sidebar">
    <ScheduleList programs={mockSchedule} />
  </aside>
);
```

### Step 5: Implement schedule list items
- Time display (e.g., "7:30 PM")
- Small thumbnail
- Program title
- Season/episode if available
- Current program indicator

### Step 6: Add auto-scroll to current
```typescript
useEffect(() => {
  const currentItem = document.querySelector('.schedule-item-current');
  currentItem?.scrollIntoView({ behavior: 'smooth', block: 'center' });
}, []);
```

### Step 7: Add retro styling
- Border and shadow effects
- Alternating row colors
- VCR font for times
- Highlight effect for current program

## Test Plan

### Objective
Verify the schedule sidebar displays program schedule correctly with mock data and adapts to different screen sizes.

### Test Scope
- Mock data generation
- Desktop sidebar layout
- Mobile bottom sheet
- Current program highlighting
- Auto-scroll behavior
- Responsive transitions

### Success Criteria
- Schedule displays 10-12 mock programs
- Current program highlighted
- Auto-scrolls to current on load
- Desktop shows fixed sidebar
- Mobile shows collapsible sheet
- Times formatted correctly
- Smooth scrolling
- Mock data structure matches EPG API

## Verification

### Acceptance Criteria
- [ ] Component created at `web/components/video/schedule-sidebar.tsx`
- [ ] Mock schedule data generated (10-12 programs)
- [ ] Each entry shows time, thumbnail, title
- [ ] Current program highlighted
- [ ] Auto-scroll to current program
- [ ] Desktop sidebar layout implemented
- [ ] Mobile bottom sheet implemented
- [ ] Responsive breakpoint works correctly
- [ ] TODO comment added for EPG integration
- [ ] Retro styling applied
- [ ] Scrollable with proper overflow handling
- [ ] No console errors

### Definition of Done
- All acceptance criteria met
- Component renders on desktop and mobile
- Ready for EPG API integration
- Styling matches app theme

## Files Modified

### New Files Created
- `web/components/video/schedule-sidebar.tsx` - Schedule sidebar/sheet component

### Modified Files
- `web/components/video/index.ts` - Add export

### API Specifications Updated
- `docs/api-specs/frontend/frontend-api.md` - Document ScheduleSidebar component

## Notes

- Mock programs should have realistic titles and times
- Consider adding date separator if schedule spans days
- Thumbnail aspect ratio: 16:9
- Mobile sheet should be draggable
- Consider virtual scrolling for long schedules (future optimization)
- EPG API endpoint: `GET /api/channels/:id/schedule?duration=24h`
- Current program detection: `start_time <= now < end_time`


