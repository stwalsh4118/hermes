# [13-9] E2E CoS Test

[Back to task list](./tasks.md)

## Description

Define and run end-to-end tests verifying PBI 13 Conditions of Satisfaction, including stable 4s segments, robust sliding window behavior, atomic playlist writes, discontinuity handling, and 5+ minutes of uninterrupted playback in a standard HLS player.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-11-11 12:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

### Functional Requirements
- Validate sustained segment cadence (~4s).
- Confirm playlist window size and correct media sequence incrementing.
- Verify discontinuity behavior on simulated restart conditions.
- Demonstrate uninterrupted playback for â‰¥ 5 minutes.

### Technical Requirements
- Use a sample source input and run the full pipeline.
- Drive a player (e.g., `ffplay` or headless player) for smoke validation.
- Capture logs/metrics and include summary in task verification.

## Implementation Plan

1) Prepare test input and segment directory cleanup script.
2) Run pipeline; monitor segment cadence and playlist updates.
3) Simulate a restart to verify discontinuity handling.
4) Play resulting stream for at least 5 minutes; capture observations.

## Test Plan

### Objective
Holistically validate that PBI 13 Conditions of Satisfaction are met.

### Success Criteria
- Atomic playlist writes observed (no partial reads).
- Window length stable and old segments pruned safely.
- No playback stalls during the 5-minute run.

## Verification

### Acceptance Criteria
- [ ] Segment cadence ~4s sustained
- [ ] Sliding window maintained with safe pruning
- [ ] Discontinuity handled without stalls
- [ ] 5+ minutes stable playback verified

## Files Modified

### Artifacts Produced
- Test logs and summary included in PR/Task notes


