# [9-8] Add Alternative Grid View

[Back to task list](./tasks.md)

## Description

Add an optional grid view as an alternative to the tree and table views for users who prefer a visual, thumbnail-based interface for browsing their media library. This view displays media items as cards with thumbnails, providing a more visual browsing experience similar to streaming services like Netflix or Plex.

**Priority: LOW** - This is an optional enhancement. Tree view (9-1) is the primary interface.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-28 00:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

### Functional Requirements

- View toggle button on library page (Tree / Table / Grid)
- Grid displays media items as cards in responsive grid layout
- Each card shows:
  - Thumbnail (video preview or placeholder with CRT effect)
  - Title (truncated if too long)
  - Duration badge (overlay on thumbnail)
- Hover shows additional information:
  - Show name
  - Season and episode number
  - Resolution
  - Transcoding requirement indicator (if needed)
- Click card opens detail modal (9-5)
- Empty state when no media
- Loading skeleton during data fetch
- Responsive grid:
  - Mobile: 2 columns
  - Tablet: 3-4 columns
  - Desktop: 4-6 columns
  - Adjust based on screen width

### Technical Requirements

- Component at `web/components/media/media-grid.tsx`
- Card-based layout with CSS Grid
- Accept filtered media data as prop
- Emit event: onCardClick
- CRT screen effect on thumbnails (from design system)
- Lazy loading of images for performance
- Virtual scrolling or pagination for large datasets
- Follow design system: retro cards, borders, shadows
- Responsive grid columns
- Accessible (card landmarks, keyboard navigation)

### Card Layout

```typescript
interface MediaGridProps {
  media: Media[];
  onCardClick: (media: Media) => void;
}

// Card structure
- Aspect ratio: 16:9 for thumbnail
- Thumbnail: CRT effect overlay
- Duration badge: positioned top-right on thumbnail
- Title: below thumbnail, truncated to 2 lines
- Hover overlay: shows additional metadata
- Card border: border-4 border-primary/30
- Card shadow: retro offset shadow
```

## Implementation Plan

### Step 1: Create Grid Component Structure
- Create `web/components/media/media-grid.tsx`
- Set up CSS Grid container with responsive columns
- Define card component structure
- Apply retro styling to cards

### Step 2: Build Media Card Component
- Create individual card component
- Thumbnail area with aspect ratio (16:9)
- Placeholder image or video thumbnail
- Apply CRT screen effect to thumbnail
- Duration badge overlay (top-right)
- Title below thumbnail (truncated)
- Card border and shadow

### Step 3: Implement Hover Overlay
- Create hover overlay component
- Shows on card hover with smooth transition
- Display additional metadata:
  - Show name
  - Season and episode
  - Resolution
  - Transcoding indicator (icon or badge)
- Overlay with semi-transparent background
- Positioned over thumbnail

### Step 4: Implement Thumbnail Handling
- Use placeholder for media without thumbnails
- Lazy load images using Intersection Observer
- Handle image load errors (fallback placeholder)
- Apply CRT effect using CSS classes from design system
- Duration badge formatted and positioned

### Step 5: Implement Responsive Grid
- Use CSS Grid with responsive columns:
  ```css
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  ```
- Mobile: 2 columns (minmax 150px)
- Tablet: 3-4 columns (minmax 200px)
- Desktop: 4-6 columns (minmax 220px)
- Gap between cards (gap-6)

### Step 6: Add Card Interactions
- Click card opens detail modal
- Hover shows overlay with metadata
- Focus visible on keyboard navigation
- Smooth transitions for hover effects
- Proper cursor (pointer) on hover

### Step 7: Implement Pagination or Infinite Scroll
- If using pagination:
  - Show page controls below grid
  - Page size options
- If using infinite scroll:
  - Load more as user scrolls down
  - Loading indicator at bottom
  - Maintain scroll position

### Step 8: Integrate with Library Page
- Update `web/app/library/page.tsx`
- Add grid option to view toggle
- Show MediaGrid when grid view selected
- Pass filtered media data
- Connect card click to detail modal

### Step 9: Polish and Accessibility
- Loading skeleton matching card grid
- Empty state with message
- Keyboard navigation (arrow keys between cards)
- ARIA labels for cards
- Alt text for thumbnails
- Focus visible on keyboard navigation
- Screen reader friendly card content

## Test Plan

### Objective
Verify the grid view provides a visual, thumbnail-based alternative for browsing media with responsive layout and smooth interactions.

### Test Scope
- Grid rendering and layout
- Card display and content
- Hover overlay
- Card interactions
- Responsive behavior
- Performance
- Accessibility

### Key Test Scenarios

#### Grid Rendering
- Grid displays all media items as cards
- Cards in responsive grid layout
- Proper spacing between cards (gap-6)
- Grid adjusts to screen width

#### Card Display
- Thumbnail displays correctly
- Placeholder shown if no thumbnail
- CRT effect applied to thumbnails
- Duration badge positioned correctly
- Duration formatted (MM:SS or HH:MM:SS)
- Title truncated appropriately

#### Hover Overlay
- Hover shows additional metadata
- Overlay appears smoothly (transition)
- Show name, season, episode displayed
- Resolution displayed
- Transcoding indicator if needed
- Overlay doesn't break layout

#### Card Interactions
- Click card opens detail modal
- Correct media passed to modal
- Hover effects smooth
- Focus visible on keyboard nav
- Multiple clicks work correctly

#### Responsive Behavior
- Mobile: 2 columns
- Tablet: 3-4 columns
- Desktop: 4-6 columns
- Cards maintain aspect ratio
- Text readable on all sizes
- Touch-friendly on mobile

#### Performance
- 1000+ items render efficiently
- Lazy loading works (images load as scrolled)
- Infinite scroll smooth if implemented
- No memory leaks
- Smooth scrolling

#### Accessibility
- Cards have proper ARIA labels
- Keyboard navigation works (tab, arrows)
- Focus visible
- Alt text on thumbnails
- Screen reader announces card content
- Hover overlay accessible

### Success Criteria
- Grid provides visual alternative to tree/table views
- Cards display key information clearly
- Hover overlay enhances information without clutter
- Responsive on all device sizes
- Performance acceptable with large libraries
- Follows design system standards
- Accessible to keyboard and screen reader users

## Verification

- [ ] MediaGrid component created
- [ ] CSS Grid with responsive columns
- [ ] Media cards render correctly
- [ ] Thumbnails display with CRT effect
- [ ] Placeholder shown when no thumbnail
- [ ] Duration badge positioned and formatted
- [ ] Title truncated appropriately
- [ ] Hover overlay shows metadata
- [ ] Hover overlay smooth transition
- [ ] Click card opens detail modal
- [ ] Responsive grid (2/3-4/4-6 columns)
- [ ] Lazy loading of thumbnails
- [ ] Pagination or infinite scroll implemented
- [ ] Loading skeleton for cards
- [ ] Empty state when no media
- [ ] View toggle integrated in library page (9-4)
- [ ] Grid view switchable from tree/table
- [ ] Follows design system (border-4, shadows, CRT effect)
- [ ] Accessible (ARIA, keyboard nav, alt text)
- [ ] Performance acceptable with 1000+ items

## Files Modified

### New Files
- `web/components/media/media-grid.tsx` - Media grid component

### Modified Files
- `web/app/library/page.tsx` - Add grid view option to view toggle

### Dependencies
- Existing: @/lib/types/api (Media type)
- Existing: @/components/ui/card (Card components)
- Existing: @/components/ui/badge (Badge for duration)
- Existing: lucide-react (icons)
- Existing: Design system CRT effect classes
- Integration with task 9-4 (library page)
- Integration with task 9-5 (detail modal)

