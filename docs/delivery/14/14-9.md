# [14-9] Remove hls-m3u8 library dependency

[Back to task list](./tasks.md)

## Description

Remove the `hls-m3u8` library dependency from the project now that we have a custom implementation. Clean up all imports and verify no references to the library remain in the codebase.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-01-XX XX:XX:XX | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

### Functional Requirements
- Remove `github.com/Eyevinn/hls-m3u8` from go.mod
- Remove all imports of the library
- Verify no code references the library
- Clean up go.sum

### Technical Requirements
- Remove import statement from [manager.go](api/internal/streaming/playlist/manager.go)
- Remove library from go.mod dependencies
- Run `go mod tidy` to clean up dependencies
- Search codebase for any remaining references
- Verify build succeeds without library
- Verify tests pass without library

### Verification Requirements
- Search for "hls-m3u8" or "Eyevinn" in codebase
- Search for "m3u8" imports (ensure we're not importing library)
- Verify go.mod doesn't list the library
- Verify go.sum doesn't have library entries
- Run `go build` to verify compilation succeeds
- Run `go test ./...` to verify tests pass

## Implementation Plan

1) Search codebase for all references to `hls-m3u8` or `Eyevinn`:
   - `grep -r "hls-m3u8" api/`
   - `grep -r "Eyevinn" api/`
   - `grep -r "github.com/Eyevinn" api/`
2) Remove import statement from [manager.go](api/internal/streaming/playlist/manager.go):
   - Remove `"github.com/Eyevinn/hls-m3u8/m3u8"` import
3) Remove library from go.mod:
   - Edit `api/go.mod`
   - Remove `github.com/Eyevinn/hls-m3u8 v0.6.1` line
4) Run `go mod tidy` in api/ directory to clean up dependencies
5) Verify no references remain:
   - Search again for any remaining references
   - Check go.mod and go.sum
6) Build and test:
   - Run `go build ./...` in api/ directory
   - Run `go test ./...` in api/ directory
7) Verify everything works:
   - All tests pass
   - Code compiles successfully
   - No import errors

## Test Plan

### Objective
Verify the library is completely removed and everything still works.

### Test Scenarios
- Code compiles without library
- All tests pass without library
- No import errors
- No references to library in codebase
- go.mod doesn't list library
- go.sum doesn't have library entries

### Success Criteria
- Library completely removed from codebase
- Code compiles successfully
- All tests pass
- No references to library remain

## Verification

### Acceptance Criteria
- [ ] Library removed from go.mod
- [ ] All imports of library removed
- [ ] No references to library in codebase
- [ ] go.sum cleaned up (no library entries)
- [ ] Code compiles successfully
- [ ] All tests pass
- [ ] No import errors

## Files Modified

### Files to Modify
- `api/internal/streaming/playlist/manager.go` — Remove library import
- `api/go.mod` — Remove library dependency
- `api/go.sum` — Will be updated by `go mod tidy`

