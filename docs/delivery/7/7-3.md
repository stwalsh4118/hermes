# [7-3] Configure shadcn/ui component library

[Back to task list](./tasks.md)

## Description

Install and configure shadcn/ui component library, then add the essential base components needed for the application. This provides a foundation of accessible, customizable UI components built on Radix UI primitives.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2025-10-27 14:00:00 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

### Functional Requirements
- Initialize shadcn/ui in the project
- Configure components.json for shadcn/ui
- Install essential base components
- Verify components render correctly with theme
- Create component showcase page for testing

### Technical Requirements
- shadcn/ui must work with Next.js 15 and React 19
- Components must support dark mode
- Components must be type-safe (TypeScript)
- Components should be customizable via Tailwind

### Components to Install
- Button
- Card
- Input
- Label
- Select
- Dialog
- Dropdown Menu
- Toast/Sonner (for notifications)
- Skeleton (for loading states)
- Badge
- Separator
- Avatar

## Implementation Plan

### Step 1: Initialize shadcn/ui
```bash
cd web
pnpm dlx shadcn@latest init
```

Answer prompts:
- Style: Default
- Base color: Slate
- CSS variables: Yes
- TypeScript: Yes
- Path aliases: @/components, @/lib, etc.

This will create `components.json` configuration file.

### Step 2: Install Base Components
```bash
cd web
pnpm dlx shadcn@latest add button
pnpm dlx shadcn@latest add card
pnpm dlx shadcn@latest add input
pnpm dlx shadcn@latest add label
pnpm dlx shadcn@latest add select
pnpm dlx shadcn@latest add dialog
pnpm dlx shadcn@latest add dropdown-menu
pnpm dlx shadcn@latest add skeleton
pnpm dlx shadcn@latest add badge
pnpm dlx shadcn@latest add separator
pnpm dlx shadcn@latest add avatar
```

### Step 3: Install Sonner for Toast Notifications
```bash
cd web
pnpm add sonner
pnpm dlx shadcn@latest add sonner
```

### Step 4: Create lib/utils.ts (if not created by init)
The `cn` utility function should be in `lib/utils.ts`:
```typescript
import { type ClassValue, clsx } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}
```

Ensure dependencies are installed:
```bash
cd web
pnpm add clsx tailwind-merge class-variance-authority
```

### Step 5: Add Toaster to Root Layout
Update `app/layout.tsx`:
```typescript
import type { Metadata } from "next";
import { Inter } from "next/font/google";
import "./globals.css";
import { ThemeProvider } from "@/components/providers/theme-provider";
import { Toaster } from "@/components/ui/sonner";

const inter = Inter({ subsets: ["latin"] });

export const metadata: Metadata = {
  title: "Hermes - Virtual TV Channel Service",
  description: "Manage and stream your own virtual TV channels",
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en" suppressHydrationWarning>
      <body className={inter.className}>
        <ThemeProvider
          attribute="class"
          defaultTheme="system"
          enableSystem
          disableTransitionOnChange
        >
          {children}
          <Toaster />
        </ThemeProvider>
      </body>
    </html>
  );
}
```

### Step 6: Create Component Showcase Page
Create `app/components/page.tsx` for testing:
```typescript
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Badge } from "@/components/ui/badge";
import { Skeleton } from "@/components/ui/skeleton";
import { Separator } from "@/components/ui/separator";
import { Avatar, AvatarFallback, AvatarImage } from "@/components/ui/avatar";

export default function ComponentsPage() {
  return (
    <div className="container mx-auto py-10 space-y-8">
      <div>
        <h1 className="text-4xl font-bold mb-2">Component Showcase</h1>
        <p className="text-muted-foreground">Testing shadcn/ui components</p>
      </div>

      <Separator />

      <Card>
        <CardHeader>
          <CardTitle>Buttons</CardTitle>
          <CardDescription>Various button styles</CardDescription>
        </CardHeader>
        <CardContent className="flex flex-wrap gap-2">
          <Button>Default</Button>
          <Button variant="secondary">Secondary</Button>
          <Button variant="destructive">Destructive</Button>
          <Button variant="outline">Outline</Button>
          <Button variant="ghost">Ghost</Button>
          <Button variant="link">Link</Button>
        </CardContent>
      </Card>

      <Card>
        <CardHeader>
          <CardTitle>Form Elements</CardTitle>
          <CardDescription>Input fields and labels</CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="email">Email</Label>
            <Input id="email" type="email" placeholder="email@example.com" />
          </div>
          <div className="space-y-2">
            <Label htmlFor="name">Name</Label>
            <Input id="name" placeholder="Your name" />
          </div>
        </CardContent>
      </Card>

      <Card>
        <CardHeader>
          <CardTitle>Badges</CardTitle>
          <CardDescription>Status indicators</CardDescription>
        </CardHeader>
        <CardContent className="flex flex-wrap gap-2">
          <Badge>Default</Badge>
          <Badge variant="secondary">Secondary</Badge>
          <Badge variant="destructive">Destructive</Badge>
          <Badge variant="outline">Outline</Badge>
        </CardContent>
      </Card>

      <Card>
        <CardHeader>
          <CardTitle>Loading Skeletons</CardTitle>
          <CardDescription>For loading states</CardDescription>
        </CardHeader>
        <CardContent className="space-y-2">
          <Skeleton className="h-4 w-full" />
          <Skeleton className="h-4 w-3/4" />
          <Skeleton className="h-4 w-1/2" />
        </CardContent>
      </Card>

      <Card>
        <CardHeader>
          <CardTitle>Avatar</CardTitle>
          <CardDescription>User avatars</CardDescription>
        </CardHeader>
        <CardContent className="flex gap-4">
          <Avatar>
            <AvatarImage src="https://github.com/shadcn.png" />
            <AvatarFallback>CN</AvatarFallback>
          </Avatar>
          <Avatar>
            <AvatarFallback>AB</AvatarFallback>
          </Avatar>
        </CardContent>
      </Card>
    </div>
  );
}
```

### Step 7: Test Dialog Component
Create a test dialog in the showcase:
```typescript
"use client";

import { Button } from "@/components/ui/button";
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";
import { toast } from "sonner";

export function DialogDemo() {
  return (
    <div className="space-y-4">
      <Dialog>
        <DialogTrigger asChild>
          <Button>Open Dialog</Button>
        </DialogTrigger>
        <DialogContent>
          <DialogHeader>
            <DialogTitle>Are you sure?</DialogTitle>
            <DialogDescription>
              This is a dialog component from shadcn/ui.
            </DialogDescription>
          </DialogHeader>
        </DialogContent>
      </Dialog>
      
      <Button onClick={() => toast.success("Toast notification works!")}>
        Show Toast
      </Button>
    </div>
  );
}
```

### Step 8: Verify Component Functionality
- Visit `/components` page
- Test each component renders correctly
- Verify dark mode works with all components
- Test interactive components (buttons, dialogs)
- Test toast notifications

### Step 9: Check components.json Configuration
Verify `components.json`:
```json
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "app/globals.css",
    "baseColor": "slate",
    "cssVariables": true
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils"
  }
}
```

## Test Plan

This task has straightforward verification through the component showcase page.

### Success Criteria
1. All components render without errors
2. Components respect dark/light theme
3. Interactive components (buttons, dialogs) work correctly
4. Toast notifications display properly
5. Components are type-safe (no TypeScript errors)
6. Styling is consistent with theme

### Manual Testing Steps
1. Visit http://localhost:3000/components
2. Verify all components display correctly
3. Toggle dark mode and verify components adapt
4. Click buttons to test interactivity
5. Open dialog to test modal functionality
6. Trigger toast to test notifications
7. Check browser console for errors

## Verification

### Acceptance Criteria
- [ ] shadcn/ui initialized with components.json
- [ ] All base components installed in components/ui/
- [ ] Button component functional with all variants
- [ ] Card component functional
- [ ] Input and Label components functional
- [ ] Select component functional
- [ ] Dialog component functional
- [ ] Dropdown Menu component functional
- [ ] Skeleton component functional for loading states
- [ ] Badge component functional
- [ ] Separator component functional
- [ ] Avatar component functional
- [ ] Sonner toast system integrated
- [ ] Toaster added to root layout
- [ ] lib/utils.ts exists with cn utility
- [ ] Component showcase page created at /components
- [ ] All components work in both light and dark mode
- [ ] No TypeScript errors
- [ ] No console errors

### Definition of Done
- All acceptance criteria met
- Components render correctly in both themes
- Interactive components function as expected
- Code is type-safe and follows best practices
- Component showcase demonstrates all installed components

## Files Modified

### New Files Created
- `components.json` - shadcn/ui configuration
- `lib/utils.ts` - Utility functions (cn helper)
- `components/ui/button.tsx` - Button component
- `components/ui/card.tsx` - Card component
- `components/ui/input.tsx` - Input component
- `components/ui/label.tsx` - Label component
- `components/ui/select.tsx` - Select component
- `components/ui/dialog.tsx` - Dialog component
- `components/ui/dropdown-menu.tsx` - Dropdown menu component
- `components/ui/sonner.tsx` - Toast component
- `components/ui/skeleton.tsx` - Skeleton loading component
- `components/ui/badge.tsx` - Badge component
- `components/ui/separator.tsx` - Separator component
- `components/ui/avatar.tsx` - Avatar component
- `app/components/page.tsx` - Component showcase page

### Files Modified
- `app/layout.tsx` - Added Toaster component
- `package.json` - Added shadcn/ui dependencies (sonner, clsx, etc.)

## Notes

- shadcn/ui is not an NPM package but a collection of copy-paste components
- Each component is added to the project and can be customized freely
- Components are built on Radix UI primitives for accessibility
- All components support dark mode out of the box
- The showcase page at `/components` is useful for development and can be removed before production
- Sonner is preferred over the basic toast for better UX and animations

